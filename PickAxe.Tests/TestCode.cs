//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.34209
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Pickaxe.Runtime;
using Pickaxe.Runtime.Dom;
using System;
using System.Collections.Generic;
using System.Linq;



public class Code : RuntimeBase
{

    private Scope_6775283ef75640b484cb388b65a9c485 _Scope_6775283ef75640b484cb388b65a9c485;

    private Scope_609fe7289f4c4f028442b41c80f11623 _Scope_609fe7289f4c4f028442b41c80f11623;

    public Code(string[] args) :
        base(args)
    {
        _Scope_6775283ef75640b484cb388b65a9c485 = new Scope_6775283ef75640b484cb388b65a9c485();
        _Scope_609fe7289f4c4f028442b41c80f11623 = new Scope_609fe7289f4c4f028442b41c80f11623();
        TotalOperations = (TotalOperations + 1);
    }

    public void Run()
    {
        InitProxies();
        Block_a2bf2b398be440288d28dca7c1372567();
        Step_46f2ab21ff0b4a5a8c115eb6f283137a();
    }

    public void Block_a2bf2b398be440288d28dca7c1372567()
    {
        Step_e738525f0e534577922219cc5d13aedc();
    }

    private CodeTable<anon_a4ed8b15ee664e1291643aaa5ddc08ea> From_16029c694879455cb939f6c8061938a0()
    {
        Call(4);
        IEnumerable<anon_a4ed8b15ee664e1291643aaa5ddc08ea> join = Fetch_9b040fbee37f426687e595584586cfc9();
        CodeTable<anon_a4ed8b15ee664e1291643aaa5ddc08ea> newTable = new CodeTable<anon_a4ed8b15ee664e1291643aaa5ddc08ea>();
        newTable.SetRows(join.ToList());
        return newTable;
    }

    private RuntimeTable<DynamicObject> Download_3de429e8fe3d4755925e430d04dbcb97()
    {
        Call(4);
        return new DynamicObjectDownloadTable(Pickaxe.Runtime.LazyDownloadArgs.CreateJavaScriptArgs(this, 4, 1, null, 5, "https://www.walmart.com/ip/Gatorade-Variety-Pack-12-Oz-18-Pk/16224470", "\r\n\tvar primaryProductId = __WML_REDUX_INITIAL_STATE__.product.primaryProduct;\r\n\r\n" +
                    "\tvar primaryProduct = __WML_REDUX_INITIAL_STATE__.product.products[primaryProduc" +
                    "tId];\r\n\r\n\treturn [{upc:primaryProduct.upc, url:url}];\r\n"));
    }

    private IEnumerable<anon_a4ed8b15ee664e1291643aaa5ddc08ea> Fetch_9b040fbee37f426687e595584586cfc9()
    {
        RuntimeTable<DynamicObject> table = Download_3de429e8fe3d4755925e430d04dbcb97();
        return table.Select(o =>
        {
            return Copy_b96ddc3d9eb140448af10e274bb84a61(o);
        });
    }

    private anon_a4ed8b15ee664e1291643aaa5ddc08ea Copy_b96ddc3d9eb140448af10e274bb84a61(DynamicObject o)
    {
        anon_a4ed8b15ee664e1291643aaa5ddc08ea t = new anon_a4ed8b15ee664e1291643aaa5ddc08ea();
        t.DynamicObject = o;
        return t;
    }

    private Table<ResultRow> Select_2c2ef1872aac41bbae7712fcf93a367c()
    {
        Call(3);
        RuntimeTable<ResultRow> result = new RuntimeTable<ResultRow>();
        CodeTable<anon_a4ed8b15ee664e1291643aaa5ddc08ea> fromTable = From_16029c694879455cb939f6c8061938a0();
        IEnumerator<anon_a4ed8b15ee664e1291643aaa5ddc08ea> x = fromTable.GetEnumerator();
        for (
        ; x.MoveNext();
        )
        {
            anon_a4ed8b15ee664e1291643aaa5ddc08ea row = x.Current;
            ResultRow resultRow = new ResultRow(0);
            result.Add(resultRow);
        }
        OnSelect(result);
        return result;
    }

    public void Step_e738525f0e534577922219cc5d13aedc()
    {
        Select_2c2ef1872aac41bbae7712fcf93a367c();
        OnProgress();
    }

    public void Step_46f2ab21ff0b4a5a8c115eb6f283137a()
    {
        OnProgress(new ProgressArgs(TotalOperations, TotalOperations));
    }

    private class Scope_6775283ef75640b484cb388b65a9c485
    {

        public int g_identity;

        public Scope_6775283ef75640b484cb388b65a9c485()
        {
        }
    }

    private class Scope_609fe7289f4c4f028442b41c80f11623
    {

        public Scope_609fe7289f4c4f028442b41c80f11623()
        {
        }
    }

    private class anon_a4ed8b15ee664e1291643aaa5ddc08ea : IRow
    {

        public DynamicObject DynamicObject;
    }
}
