//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.34014
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using HtmlAgilityPack;
using Pickaxe.Runtime;
using System;
using System.Collections.Generic;
using System.Linq;



public class Code : RuntimeBase
{

    private Scope_3cc4032da5d44dd2856ed07b599eb64b _Scope_3cc4032da5d44dd2856ed07b599eb64b;

    private Scope_c47ea18789564eae88e77dfb2597acb6 _Scope_c47ea18789564eae88e77dfb2597acb6;

    public Code(string[] args) :
        base(args)
    {
        _Scope_3cc4032da5d44dd2856ed07b599eb64b = new Scope_3cc4032da5d44dd2856ed07b599eb64b();
        _Scope_c47ea18789564eae88e77dfb2597acb6 = new Scope_c47ea18789564eae88e77dfb2597acb6();
        TotalOperations = (TotalOperations + 1);
    }

    public void Run()
    {
        InitProxies();
        Block_43662a6dbf9b4873b3a17416c2e8e02a();
        Step_3c7b28bc304149fdaa2a73ef8b008566();
    }

    public void Block_43662a6dbf9b4873b3a17416c2e8e02a()
    {
        Step_e49ab225b96640afb16d8e3be82d8a50();
    }

    private CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> From_330ce1c3ad5c446f989f079ff3ba9b28()
    {
        Call(5);
        IEnumerable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> join = Fetch_4c637320b940476e97ecf2eba62bc7e5();
        CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> newTable = new CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1>();
        newTable.SetRows(join.ToList());
        return newTable;
    }

    private RuntimeTable<DownloadPage> Download_f451dec9254541b7ac08664e7fe55d09()
    {
        Call(5);
        return new ThreadedDownloadPageTable(this, 5, 2, "http://brockreeve.com");
    }

    private IEnumerable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> Fetch_4c637320b940476e97ecf2eba62bc7e5()
    {
        RuntimeTable<DownloadPage> table = Download_f451dec9254541b7ac08664e7fe55d09();
        return table.Select(o =>
        {
            return Copy_eeac5625410440a2b2eb876a045e0798(o);
        });
    }

    private anon_30db03e2d0234ad48f79f7cf2e0fd7d1 Copy_eeac5625410440a2b2eb876a045e0798(DownloadPage o)
    {
        anon_30db03e2d0234ad48f79f7cf2e0fd7d1 t = new anon_30db03e2d0234ad48f79f7cf2e0fd7d1();
        t.DownloadPage = o;
        return t;
    }

    private Table<ResultRow> Select_503a097c9676444292f255767124ec7b()
    {
        Call(3);
        RuntimeTable<ResultRow> result = new RuntimeTable<ResultRow>();
        result.AddColumn(".one");
        CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> fromTable = From_330ce1c3ad5c446f989f079ff3ba9b28();
        fromTable = Where_2f8bce4fc139424e809c5ce667a89042(fromTable);
        IEnumerator<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> x = fromTable.GetEnumerator();
        for (
        ; x.MoveNext();
        )
        {
            anon_30db03e2d0234ad48f79f7cf2e0fd7d1 row = x.Current;
            IEnumerator<HtmlNode> y = row.DownloadPage.nodes.GetEnumerator();
            for (
            ; y.MoveNext();
            )
            {
                HtmlNode node = y.Current;
                ResultRow resultRow = new ResultRow(1);
                resultRow[0] = node.Pick(".one").TakeText();
                if ((resultRow[0] != null))
                {
                    result.Add(resultRow);
                }
            }
        }
        OnSelect(result);
        return result;
    }

    private CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> Where_2f8bce4fc139424e809c5ce667a89042(CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> table)
    {
        Call(6);
        CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> newTable = new CodeTable<anon_30db03e2d0234ad48f79f7cf2e0fd7d1>();
        IList<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> rows = table.Where(row =>
        {
            return (true && true);
        }).ToList();
        newTable.SetRows(rows);
        IEnumerator<anon_30db03e2d0234ad48f79f7cf2e0fd7d1> i = newTable.GetEnumerator();
        for (
        ; i.MoveNext();
        )
        {
            anon_30db03e2d0234ad48f79f7cf2e0fd7d1 row = i.Current;
            row.DownloadPage = row.DownloadPage.CssWhere("ol .temp");
        }
        return newTable;
    }

    public void Step_e49ab225b96640afb16d8e3be82d8a50()
    {
        Select_503a097c9676444292f255767124ec7b();
        OnProgress();
    }

    public void Step_3c7b28bc304149fdaa2a73ef8b008566()
    {
        OnProgress(new ProgressArgs(TotalOperations, TotalOperations));
    }

    private class Scope_3cc4032da5d44dd2856ed07b599eb64b
    {

        public int g_identity;

        public Scope_3cc4032da5d44dd2856ed07b599eb64b()
        {
        }
    }

    private class Scope_c47ea18789564eae88e77dfb2597acb6
    {

        public Scope_c47ea18789564eae88e77dfb2597acb6()
        {
        }
    }

    private class anon_30db03e2d0234ad48f79f7cf2e0fd7d1 : IRow
    {

        public DownloadPage DownloadPage;
    }
}
