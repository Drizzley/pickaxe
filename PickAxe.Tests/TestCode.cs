//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using HtmlAgilityPack;
using Pickaxe.Runtime;
using System;
using System.Collections.Generic;
using System.Linq;



public class Code : RuntimeBase
{

    private Scope_26aecc91b4cc443ab0b2f10988432a41 _Scope_26aecc91b4cc443ab0b2f10988432a41;

    private Scope_58a2648171c14a34b8a1a14b9f7b02d9 _Scope_58a2648171c14a34b8a1a14b9f7b02d9;

    public Code(string[] args) :
            base(args)
    {
        _Scope_26aecc91b4cc443ab0b2f10988432a41 = new Scope_26aecc91b4cc443ab0b2f10988432a41();
        _Scope_58a2648171c14a34b8a1a14b9f7b02d9 = new Scope_58a2648171c14a34b8a1a14b9f7b02d9();
        TotalOperations = (TotalOperations + 2);
    }

    public void Run()
    {
        InitProxies();
        Block_224c00275b1d43d8bd0b0fbbad00348e();
        Step_c79283910f3541e7ba3062e8085ca22a();
    }

    public void Block_224c00275b1d43d8bd0b0fbbad00348e()
    {
        Step_2f8650fc0ce0415cbad8019a313e19a5();
        Step_98f413ca9e3e4fadad1ebda0a9dd40d8();
    }

    private Table<ResultRow> Select_f287f042b9594bb9a122245bf39e9b38()
    {
        Call(6);
        RuntimeTable<ResultRow> result = new RuntimeTable<ResultRow>();
        ResultRow resultRow = new ResultRow(1);
        resultRow[0] = "http://www.walmart.com/browse/food/canned-powdered-milk/976759_976780_1044149";
        result.Add(resultRow);
        return result;
    }

    private void Insert_91792014b35f4c5dace351ae5078b442()
    {
        Call(5);
        Table<ResultRow> resultRows = Select_f287f042b9594bb9a122245bf39e9b38();
        _Scope_58a2648171c14a34b8a1a14b9f7b02d9.a.BeforeInsert(false);
        _Scope_26aecc91b4cc443ab0b2f10988432a41.g_identity = _Scope_58a2648171c14a34b8a1a14b9f7b02d9.a.RowCount;
        IEnumerator<ResultRow> x = resultRows.GetEnumerator();
        for (
        ; x.MoveNext();
        )
        {
            _Scope_26aecc91b4cc443ab0b2f10988432a41.g_identity = (_Scope_26aecc91b4cc443ab0b2f10988432a41.g_identity + 1);
            ResultRow row = x.Current;
            a tableRow = new a();
            tableRow.t = Convert.ToString(row[0]);
            _Scope_58a2648171c14a34b8a1a14b9f7b02d9.a.Add(tableRow);
        }
        _Scope_58a2648171c14a34b8a1a14b9f7b02d9.a.AfterInsert();
    }

    public void Step_2f8650fc0ce0415cbad8019a313e19a5()
    {
        Insert_91792014b35f4c5dace351ae5078b442();
        OnProgress();
    }

    private CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f> From_e150b1dd0b7e4cde8058c8419e9d22ef()
    {
        Call(10);
        IEnumerable<anon_df32f0962f8b43909ad2838a7c3f4f0f> join = Fetch_4f7fe72dbd69446f95c379938a71c571();
        CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f> newTable = new CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f>();
        newTable.SetRows(join.ToList());
        return newTable;
    }

    private IEnumerable<anon_df32f0962f8b43909ad2838a7c3f4f0f> Fetch_4f7fe72dbd69446f95c379938a71c571()
    {
        CodeTable<a> table = _Scope_58a2648171c14a34b8a1a14b9f7b02d9.a;
        return table.Select(o => {
            return Copy_594dae51ed744c9993e0f8463d5be685(o);
        });
    }

    private anon_df32f0962f8b43909ad2838a7c3f4f0f Copy_594dae51ed744c9993e0f8463d5be685(a o)
    {
        anon_df32f0962f8b43909ad2838a7c3f4f0f t = new anon_df32f0962f8b43909ad2838a7c3f4f0f();
        t.a = o;
        return t;
    }

    private Table<ResultRow> Select_9fbc9aa96589458685690855f950c154()
    {
        Call(9);
        RuntimeTable<ResultRow> result = new RuntimeTable<ResultRow>();
        result.AddColumn("t");
        CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f> fromTable = From_e150b1dd0b7e4cde8058c8419e9d22ef();
        fromTable = Where_0cb4bbd52d0143c28d3b694d0f5d5d91(fromTable);
        IEnumerator<anon_df32f0962f8b43909ad2838a7c3f4f0f> x = fromTable.GetEnumerator();
        for (
        ; x.MoveNext();
        )
        {
            anon_df32f0962f8b43909ad2838a7c3f4f0f row = x.Current;
            ResultRow resultRow = new ResultRow(1);
            resultRow[0] = row.a.t;
            if ((resultRow[0] != null))
            {
                result.Add(resultRow);
            }
        }
        OnSelect(result);
        return result;
    }

    private CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f> Where_0cb4bbd52d0143c28d3b694d0f5d5d91(CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f> table)
    {
        Call(11);
        CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f> newTable = new CodeTable<anon_df32f0962f8b43909ad2838a7c3f4f0f>();
        IList<anon_df32f0962f8b43909ad2838a7c3f4f0f> rows = table.Where(row => {
            return (row.a.t.Contains("http://www.walmart.com/") == false);
        }).ToList();
        newTable.SetRows(rows);
        return newTable;
    }

    public void Step_98f413ca9e3e4fadad1ebda0a9dd40d8()
    {
        Select_9fbc9aa96589458685690855f950c154();
        OnProgress();
    }

    public void Step_c79283910f3541e7ba3062e8085ca22a()
    {
        OnProgress(new ProgressArgs(TotalOperations, TotalOperations));
    }

    private class Scope_26aecc91b4cc443ab0b2f10988432a41
    {

        public int g_identity;

        public Scope_26aecc91b4cc443ab0b2f10988432a41()
        {
        }
    }

    private class Scope_58a2648171c14a34b8a1a14b9f7b02d9
    {

        public CodeTable<a> a;

        public Scope_58a2648171c14a34b8a1a14b9f7b02d9()
        {
            a = new BufferTable<a>();
        }
    }

    private class a : IRow
    {

        public string t;
    }

    private class anon_df32f0962f8b43909ad2838a7c3f4f0f : IRow
    {

        public a a;
    }
}
